# 고급 프로젝트 협업 일지 (1팀 박은서)

## 오늘 할 일
* votes, hackle 활용해서 마스터 테이블 완성하기
## 오늘 한 일
* votes, hackle 활용해서 마스터 테이블 완성하기
> hackle 부분은 종헌님이 보고계셔서, 나는 사용할 테이블들의 시계열을 맞추고 기존에 만들었던 votes 테이블들의 파생 변수와 기존 변수를 만들거나 추려내어 클러스터링 분석을 위한 마스터 테이블을 만들었다. 이 내용을 기반으로 내일 종헌님의 hackle 변수들과 합칠 수 있을지, 모델링 결과는 어떤지 돌려보고 이야기를 나눠야할 것 같다.
## 내일 할 일
* 모델링 돌려보기
* 모델 개선하려면 어떤 부분 디벨롭 해야할지 팀원들과 의견 나누기
## Codes
```ruby
# 기준 테이블 id -> user_id 변경
user = user.rename(columns={'id': 'user_id'})


# 병합할 테이블들와 가져올 컬럼, 그리고 조인 키 지정
tables_to_merge = [
    (blockrecord, 'user_id', ['block_cnt', 'block_any']),
    (blocked, 'block_user_id', ['blocked_any']),
    (paymenthis, 'user_id', ['pay_cnt', 'phone_type', 'productId']),
    (questionrpt, 'user_id', ['question_rep_any']),
    (candidate, 'user_id', ['cand_any']),
    (attendance, 'user_id', ['attendance_cnt'])
]

for df, key, cols in tables_to_merge:
    cols_to_select = [c for c in cols if c != key]
    temp = df[[key] + cols_to_select].drop_duplicates(subset=[key])

    # key가 user_id가 아니면 컬럼명 변경
    if key != 'user_id':
        temp = temp.rename(columns={key: 'user_id'})
        merge_key = 'user_id'
    else:
        merge_key = 'user_id'

    user = user.merge(temp, on=merge_key, how='left')

# 숫자형만 결측치 생기면 0으로 채우기
num_cols = user.select_dtypes(include=['number']).columns
user[num_cols] = user[num_cols].fillna(0)

user.head()
```
## Issues & Challenges
* 문제 : 시계열을 서비스 부흥기로 줄여서 대상을 추려냈음에도 불구하고, 질문/투표/결제 등 앱 내에서의 활동을 거의 하지 않은 유저들이 훨씬 많은 것 같다.
## Notes & Ideas
* 아이디어 : 앞선 문제 때문에, 이번 프로젝트에서는 분석 방법론의 성능 개선에 집착하기보다는 분석 결과가 어떤 점을 시사하는지 잘 풀어내는게 더 중요하다고 느꼈다.
## Reflection
* 좋았던 점 : 집중해서 차근차근 디버깅을 해나가니, 모델링 준비까지 무리없이 잘 와서 다행이었다.
* 아쉬웠던 점 : 척박한 상황에서 모든 것을 종합적으로 고려해야하다보니 시작조차 하기 어려워지는 것 같다.
